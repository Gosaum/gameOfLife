classDiagram
    %% Game of Life
    class GOL {
        + run() void
    }

    class UnitTest {
        + run() bool
    }

    class LifeAlgorithm{
        + computeCellsToToggle() Cell[ ] $
        + toggleCells(Cell CellsToToggle[]) void $
    }
    class Grid {
        <<Abstract>>
        # int n
        # int p
        # Cell grid[n][p]
        # Cell aliveCells[ ]

        + getN() int
        + getP() int
        + getAliveCells() Cell[ ]
        + updateAliveCells() void
        + updateAliveCells(Cell toggledCells[ ]) void

        (virtual) + mooreNeighborhood(Cell cell) Cell[ ]*
    }

    class StandardGrid {
        + mooreNeighborhood(Cell cell) Cell[ ]
    }

    class ToroidalGrid {
        + mooreNeighborhood(Cell cell) Cell[ ]
    }

    class GridFactory {
        +createGrid(String type, int n, int p) Grid $
    }

    class Cell {
        <<Abstract>>
        - bool alive
        - int x
        - int y
        + isAlive() bool
        + setAlive(bool state) void
        + getX() int
        + getY() int

        (virtual) + toggleAlive() void *
        (virtual) + computeNextState(int livingNeighborsCount) bool *
    }

    class StandardCell {
        + toggleAlive() void
        + computeNextState(int livingNeighborsCount) bool
    }

    class ObstacleCell {
        + toggleAlive() void 
        + computeNextState(int livingNeighborsCount) bool 
    }

    class CellFactory {
        + createCell(String type, bool state, int x, int y) Cell $
    }

    class GUI {
        + showInitialMenu() void
        + createCustomGrid() void
        + startSimulation() void
    }

    class Console {
        + runConsoleMode() void
    }

    class ErrorHandler {
        + showError(String message)
    }

    class FileHandler {
        + saveGridToFile(Grid grid, string path)
        + loadGridFromFile(String path) Grid
    }

    class GameSettings {
        + int maxIterations
        + bool isToroidal
        + setMaxIterations(int maxIteration) void
        + toggleToroidalMode() void
    }

    class Renderer {
        +renderGrid(Grid grid) void
    }

    GOL ..> UnitTest : uses
    GOL --> GUI
    GOL ..> GameSettings


    GOL ..> GridFactory
    GridFactory ..> Grid
    GOL ..> LifeAlgorithm : uses
    LifeAlgorithm ..> Grid
    LifeAlgorithm ..> Cell

    Grid <|-- ToroidalGrid
    Grid <|-- StandardGrid
    
    Cell --* Grid
    CellFactory ..> Cell
    Grid ..> CellFactory : uses
    
    Cell <|-- ObstacleCell
    Cell <|-- StandardCell

    Renderer --> Grid
    Console ..> ErrorHandler : uses
    Console ..> FileHandler : uses

    GUI --> Console
    GUI ..> ErrorHandler : uses
    GUI ..> FileHandler : uses
    GUI --> Renderer
    GUI --> GameSettings
